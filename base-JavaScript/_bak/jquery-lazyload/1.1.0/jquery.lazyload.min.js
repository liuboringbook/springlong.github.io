jQuery.fn.lazyLoad=function(e){function t(){for(var e,d,u,w,g=0,m=a.length,v=s["scroll"+f](),y=s[n](),p=l?0:s.offset()[h];m>g;)d=a[g],e=d.ele,u=e.offset()[h]+(l?0:v-p),w=u<=v+y+o.threshold,w&&(!o.viewport||u+e[n]()+o.threshold>=v)?(d.isImg?e.attr("src",e.attr(c)).removeAttr(c):e.css("backgroundImage","url("+e.attr(c)+")").removeAttr(c),i&&e.hide()[o.effect](),a.splice(g,1),m--):g++;0===m&&(s.off("scroll",t),l&&r.off("resize",t))}var r=jQuery(window),o=jQuery.extend({dataSrc:"data-src",container:r,threshold:0,effect:"show",scroll:"y",viewport:!1},e),s=o.container,c=o.dataSrc,i="show"!==o.effect,a=[],l=s[0]===window,f="x"===o.scroll?"Left":"Top",h=f.toLowerCase(),n="x"===o.scroll?"width":"height";return this.each(function(){a.push({ele:jQuery(this),isImg:"img"===this.nodeName.toLowerCase()})}),s.on("scroll",t),l&&r.resize(t),t(),this};