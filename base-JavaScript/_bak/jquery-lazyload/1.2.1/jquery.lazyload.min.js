jQuery.fn.lazyLoad=function(e){function t(){for(var e,t,o,m,w=0,y=l.length,g=a["scroll"+h](),p=a[d](),v=f?0:a.offset()[u];y>w;)t=l[w],e=t.ele,o=e.offset()[u]+(f?0:g-v),m=o<=g+p+s.threshold,m&&(!s.viewport||o+e[d]()+s.threshold>=g)?(t.isImg?e.attr("src",e.attr(c)).removeAttr(c):e.css("backgroundImage","url("+e.attr(c)+")").removeAttr(c),"fadeIn"===n?e.css("opacity",0).animate({opacity:1}):"slideDown"===n&&e.hide()[n](),l.splice(w,1),y--):w++;0===y&&(a.off("scroll",r),f&&i.off("resize",r))}var o,r,i=jQuery(window),s=jQuery.extend({dataSrc:"data-src",container:i,threshold:0,effect:"show",scroll:"y",viewport:!1,timeout:0},e),a=s.container,c=s.dataSrc,n=s.effect,l=[],f=a[0]===window,h="x"===s.scroll?"Left":"Top",u=h.toLowerCase(),d="x"===s.scroll?"width":"height";return this.each(function(){l.push({ele:jQuery(this),isImg:"img"===this.nodeName.toLowerCase()})}),r=0===s.timeout?t:function(){clearTimeout(o),o=setTimeout(t,s.timeout)},a.on("scroll",r),f&&i.resize(r),r(),this};