jQuery.fn.scrollWith=function(t){if(!document.querySelectorAll)return this;t=jQuery.extend({distanceToTop:0,distanceToBottom:0},t);var o=jQuery(window),i=jQuery(document);return this.each(function(e,n){function s(){a=f.outerHeight(),p=f.offset().top,u=p+a,r()}function r(){var t,o=d;l.siblings().each(function(i,e){o=(t=$(e).outerHeight(!0))>o?t:o}),l.height(o-g-m)}function c(){var o,e,n=i.scrollTop();return s(),v>=n?(j||1!==y||(y=0),h.css({position:"static"}),void 0):(o=i.height()-u,e=(e=t.distanceToBottom-o)>0?e:0,Q>=T?n+T>u-e?h.css({position:"absolute",top:"auto",bottom:e+"px"}):h.css({position:"fixed",top:t.distanceToTop-parseInt(h.css("marginTop"))+"px",bottom:"auto"}):n+Q>u-e?h.css({position:"absolute",top:"auto",bottom:e+"px"}):n+Q>x+b&&h.css({position:"fixed",top:"auto",bottom:"0"}),j||0!==y||(h.hide().stop().fadeIn(),y=1),void 0)}var a,p,u,h=jQuery(n),l=h.parent(),f=l.parent(),d=l.outerHeight(!0),g=parseInt(l.css("marginTop")),m=parseInt(l.css("marginBottom")),b=h.outerHeight(),T=b+t.distanceToTop,x=h.offset().top,v=x,y=0,j=null===("nextElementSibling"in n?n.nextElementSibling:n.nextSibling),Q=o.height();"static"===l.css("position")&&l.css("position","relative"),!j&&(v=x=l.offset().top+l.height()),T>Q&&(v+=b-Q),o.bind({scroll:c,resize:function(){var t=o.height();Q!==t&&(Q=t,T>Q&&(v=x+b-Q),c())}}),c()})};