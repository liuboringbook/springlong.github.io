jQuery.fn.lazyLoad=function(e){function t(){for(var e,t,o,w,m=0,g=n.length,y=c["scroll"+h](),v=c[d](),p=f?0:c.offset()[u];g>m;)t=n[m],e=t.ele,o=e.offset()[u]+(f?0:y-p),w=o<=y+v+i.threshold,w&&(!i.viewport||o+e[d]()+i.threshold>=y)?(t.isImg?e.attr("src",e.attr(a)).removeAttr(a):e.css("backgroundImage","url("+e.attr(a)+")").removeAttr(a),l&&e.hide()[i.effect](),n.splice(m,1),g--):m++;0===g&&(c.off("scroll",r),f&&s.off("resize",r))}var o,r,s=jQuery(window),i=jQuery.extend({dataSrc:"data-src",container:s,threshold:0,effect:"show",scroll:"y",viewport:!1,timeout:0},e),c=i.container,a=i.dataSrc,l="show"!==i.effect,n=[],f=c[0]===window,h="x"===i.scroll?"Left":"Top",u=h.toLowerCase(),d="x"===i.scroll?"width":"height";return this.each(function(){n.push({ele:jQuery(this),isImg:"img"===this.nodeName.toLowerCase()})}),r=0===i.timeout?t:function(){clearTimeout(o),o=setTimeout(t,i.timeout)},c.on("scroll",r),f&&s.resize(r),r(),this};