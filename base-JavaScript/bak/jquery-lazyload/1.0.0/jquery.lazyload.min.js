jQuery.fn.lazyLoad=function(e){function o(){for(var e,u,h,g=0,m=c.length,w=s["scroll"+l](),v=s[d](),p=a?0:s.offset()[f];m>g;)e=c[g],u=e.ele,h=u.offset()[f]+(a?0:w-p),h<=w+v+r.threshold?(e.isImg?u.attr("src",u.attr(i)).removeAttr(i):u.css("backgroundImage","url("+u.attr(i)+")").removeAttr(i),n&&u.hide()[r.effect](),c.splice(g,1),m--):g++;0===m&&(s.off("scroll",o),a&&t.off("resize",o))}var t=jQuery(window),r=jQuery.extend({dataSrc:"data-src",container:t,threshold:0,effect:"show",scroll:"y"},e),s=r.container,i=r.dataSrc,n="show"!==r.effect,c=[],a=s[0]===window,l="x"===r.scroll?"Left":"Top",f=l.toLowerCase(),d="x"===r.scroll?"width":"height";return this.each(function(){c.push({ele:jQuery(this),isImg:"img"===this.nodeName.toLowerCase()})}),s.on("scroll",o),a&&t.resize(o),o(),this};